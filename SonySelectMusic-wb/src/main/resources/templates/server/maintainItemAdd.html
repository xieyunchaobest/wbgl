<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8" />
	 <script type="text/javascript">
	 $().ready(function() {
		 formValidate();
		 initCompuments();
	 }); 
	 
	 function initCompuments(){
		 var userName=$("#userName").val();
		 $("#btnApplyMetarial").hide();
		 $("#btnok").show();
		 var currentNodeName=$("#currentNodeName").val();
		 if(userName=='WYGJ'){
			 $("#trpillRecevicePerson").hide();
			 $("#trareaLeader").hide(); 
			 $("#trsurveryPerson").hide();
			 $("#trarticlePerson").hide();
			 $("#trprojectFirm").hide();
			 $("#trconstructionLeader").hide();
			 $("#trdurationTime").hide();
			 $("#troverTimes").hide();
			 $("#trMaintainMethod").hide();
			 $("#trstate").hide();
			 $("#trOverTimeReason").hide();
			 $("#trProspectResult").hide();
		 }else if(userName=='DDS'){
			 $("#taskName").val("1");
			 $("#taskName").attr('disabled',true);
			 $("#customerName").val('王学理');
			 $("#customerName").attr('readonly',true);
			 $("#customerLevel").attr('disabled',true);
			 $("#address").val('林肯公园一区8号楼1单元301');
			 $("#address").attr('readonly',true);
			 $("#phone").attr('readonly',true);
			 $("#phone").val('18611298765');
			 $("#trpillRecevicePerson").hide();
			 $("#trMaintainMethod").hide();
			 $("#trsurveryPerson").hide();
			 $("#trarticlePerson").hide();
			 $("#trprojectFirm").hide();
			 $("#trconstructionLeader").hide();
			 $("#appointmentIn").attr('readonly',true);
			 $("#tractllyIn").hide();
			 $("#planFinishTime").attr('readonly',true);
			 $("#tractllyFinishTime").hide();
			 $("#isEmergency").attr('disabled',true);
			 $("#trProspectResult").hide();
			 $("#trOverTimeReason").hide();
			 $("#troverTimes").hide();
		 }else if(userName=='QYFZR'){//区域负责人
			 $("#taskName").val("1");
			 $("#taskName").attr('disabled',true);
			 $("#customerName").val('王学理');
			 $("#customerName").attr('readonly',true);
			 $("#customerLevel").attr('disabled',true);
			 $("#address").val('林肯公园一区8号楼1单元301');
			 $("#address").attr('readonly',true);
			 $("#phone").attr('readonly',true);
			 $("#phone").val('18611298765');
			 if(currentNodeName=='现场看擦'){
				 $("#trMaintainMethod").hide();
			 }else{
				 
			 }
			 $("#trpillRecevicePerson").val('调度室A');;
			 $("#trsurveryPerson").hide();
			 $("#appointmentIn").attr('readonly',true);
			 $("#tractllyIn").hide();
			 $("#planFinishTime").attr('readonly',true);
			 $("#tractllyFinishTime").hide();
			 $("#isEmergency").attr('disabled',true);
		 }else if(userName=='WXFZR'){
			 $("#taskName").val("1");
			 $("#taskName").attr('disabled',true);
			 $("#customerName").val('王学理');
			 $("#customerName").attr('readonly',true);
			 $("#customerLevel").attr('disabled',true);
			 $("#address").val('林肯公园一区8号楼1单元301');
			 $("#address").attr('readonly',true);
			 $("#phone").attr('readonly',true);
			 $("#phone").val('18611298765');
			 $("#trpillRecevicePerson").val('调度室A');;
			 $("#trsurveryPerson").hide();
			 $("#appointmentIn").attr('readonly',true);
			 $("#tractllyIn").hide();
			 $("#planFinishTime").attr('readonly',true);
			 $("#tractllyFinishTime").hide();
			 $("#isEmergency").attr('disabled',true);
			 $("#btnApplyMetarial").show();
			 $("#btnok").hide();
		 }else if(userName=='CLY'){
			 $("#taskName").val("1");
			 $("#taskName").attr('disabled',true);
			 $("#customerName").val('王学理');
			 $("#customerName").attr('readonly',true);
			 $("#customerLevel").attr('disabled',true);
			 $("#address").val('林肯公园一区8号楼1单元301');
			 $("#address").attr('readonly',true);
			 $("#phone").attr('readonly',true);
			 $("#phone").val('18611298765');
			 $("#trpillRecevicePerson").val('调度室A');;
			 $("#trsurveryPerson").hide();
			 $("#appointmentIn").attr('readonly',true);
			 $("#tractllyIn").hide();
			 $("#planFinishTime").attr('readonly',true);
			 $("#tractllyFinishTime").hide();
			 $("#isEmergency").attr('disabled',true);
	 
		 }
	 }
	 
	 
	 function formValidate(){
		 $("#aform").validate({
		     	focusInvalid:false	, 
		     	rules : {
		     		"name":{
		     			required:true 
		     		} , 
		     		"phone":{
		     			required:true 
		     		} , 
		     		"kmCount":{
		     			required:true,
		     			number:true
		     		},
		     		"afile":{
		     			required:$("#carId").val()=='0'
		     		} 
		     	},
		         messages: {
		             
		         }
		     });
	 }
	 
	 
	 function selectMaintainTask(){
		 $("#customerName").val('王学理');
		 $("#address").val('林肯公园一区8号楼1单元301	');
		 $("#phone").val('18611298765');
	 }
	 
    </script> 
</head>

<form id="aform" th:action="@{/server/maintainItemSave.html}"  method="post" enctype="multipart/form-data"  >
	<div style="display:none">
		<input type="text" id="id" name="id" maxlength="100"  />
		<input type="hidde" name="userName" id="userName" th:value="${userName}" />
		<input type="hidde" name="currentNodeName" id="currentNodeName" th:value="${session.process.currentNodeName}" />
	</div>

	 <div id="userAdd">
	 	<table class="table table-bordered table-striped" >
	 		<tr>
	 			<td align="right" width="100px">任务名称：</td>
	 			<td width="150px">
	 				  <select  name="taskName" id="taskName"  style="height:30px;width:120px" onchange="selectMaintainTask()">
	 				  	<option value="">请选择</option>
		 				<option value="1">林肯公园一区8号楼1单元301漏水</option>
		 				<option value="2">君安国际301木饰面划伤</option>
		 				<option value="">林肯公园一区8号楼1单元301漏水	</option>
		 				<option value="">林肯公园二区4号楼1单元501瓷砖</option>
					</select>
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">客户姓名：</td>
	 			<td width="150px">
	 				 <input type="text" id="customerName" name="customerName" maxlength="10"   /> 
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">客户级别：</td>
	 			<td width="150px">
	 				 <select name="customerLevel" id="customerLevel">
	 				 	<option>普通</option>
	 				 	<option>VIP</option>
	 				 </select>
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">地址：</td>
	 			<td width="150px">
	 				 <input type="text" id="address" name="address"   size="30" /> 
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">联系方式：</td>
	 			<td width="150px">
	 				 <input type="text" id="phone" name="phone"  /> 
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">维修归类：</td>
	 			<td width="150px">
	 				 <select  name="maintainType" id="maintainType" style="height:30px;width:120px" >
		 				<option value="1">衣柜</option>
		 				<option value="2">木门</option>
		 				<option value="">木饰面</option>
		 				<option value="" selected="selected">壁纸</option>
		 				<option value="">木地板</option>
		 				<option value="">橱柜</option>
		 				<option value="">精装其他</option>
		 				<option value="">吊顶</option>
		 				<option value="">石材</option>
		 				<option value="">空调</option>
					</select>
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">维修项：</td>
	 			<td width="150px">
	 				 <select  name="maintainItem" id="maintainItem" style="height:30px;width:120px" >
		 				<option value="1" selected="selected">污染</option>
		 				<option value="2">色差</option>
		 				<option value="">维修改造恢复</option>
		 				<option value="">接缝明显</option>
		 				<option value="">基层处理</option>
					</select>
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">是否为应急：</td>
	 			<td width="150px">
	 				 <select  name="isEmergency" id="isEmergency" style="height:30px;width:120px" >
		 				<option value="1">否</option>
		 				<option value="2">否</option>
					</select>
	 				 
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">描述：</td>
	 			<td width="150px">
	 				<input type="text" id="remarks" name="remarks" size="40" th:value="${session.process.remarks}"/>
	 			</td>
	 		</tr>
	 		<tr id="trProspectResult">
	 			<td align="right" width="100px">勘探结果：</td>
	 			<td width="150px">
	 				<input type="text" id="prospectResult" name="prospectResult" th:value="${session.process.prospectResult}" size="40" />
	 			</td>
	 		</tr>
	 		<tr id="trMaintainMethod">
	 			<td align="right" width="100px">维修方案：</td>
	 			<td width="150px">
	 				<input type="text" id="maintainMethod" name="maintainMethod" size="40" th:value="${session.process.maintainMethod}"/>
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">物业管家：</td>
	 			<td width="150px">
	 				 <input type="text"  name="wgyj" readonly="true"  value="物业管家A"/>
	 			</td>
	 		</tr>
	 		<tr id="trpillRecevicePerson">
	 			<td align="right" width="100px">接单人：</td>
	 			<td width="150px">
	 				 <input type="text" name="pillRecevicePerson" id="pillRecevicePerson" value="调度室A"  />
	 			</td>
	 		</tr>
	 		<tr id="trareaLeader">
	 			<td align="right" width="100px">区域负责人：</td>
	 			<td width="150px">
	 				 <select name="areaLeader" id="areaLeader">
	 				 	<option>区域负责人A</option>
	 				 	<option>区域负责人B</option>
	 				 	<option>区域负责人C</option>
	 				 </select>
	 			</td>
	 		</tr>
	 		<tr id="trsurveryPerson">
	 			<td align="right" width="100px">回访人：</td>
	 			<td width="150px">
	 				 <input type="text"  id="surveryPerson" />
	 			</td>
	 		</tr>
	 		<tr id="trarticlePerson">
	 			<td align="right" width="100px">备料员：</td>
	 			<td width="150px">
	 				<input type="text"  id="articlePerson"/>
	 			</td>
	 		</tr>
	 		<tr id="trprojectFirm">
	 			<td align="right" width="100px">工程单位：</td>
	 			<td width="150px">
	 			 <select name="projectFirm" id="projectFirm">
	 				 	<option>工程维修单位A</option>
	 				 	<option>工程维修单位B</option>
	 				 	<option>工程维修单位C</option>
	 				 </select>
	 			</td>
	 		</tr>
	 		<tr id="trconstructionLeader">
	 			<td align="right" width="100px">施工负责人：</td>
	 			<td width="150px">
	 				 <input type="text"  id="constructionLeader" name="constructionLeader" th:value="${session.process.constructionLeader}"/>
	 			</td>
	 		</tr>
	 		<tr id="trappointmentIn">
	 			<td align="right" width="100px">预约进场时间：</td>
	 			<td width="150px">
	 				<input type="text"  id="appointmentIn" value="2015-12-22"/>
	 			</td>
	 		</tr>
	 		<tr id="tractllyIn">
	 			<td align="right" width="100px">实际进场时间：</td>
	 			<td width="150px">
	 				 <input type="text"  id="actllyIn"/>
	 			</td>
	 		</tr>
	 		<tr id="trplanFinishTime">
	 			<td align="right" width="100px">要求完成时间：</td>
	 			<td width="150px">
	 				<input type="text" id="planFinishTime"  value="2015-12-28"/>
	 			</td>
	 		</tr>
	 		<tr id="tractllyFinishTime">
	 			<td align="right" width="100px">实际完成时间：</td>
	 			<td width="150px">
	 				 <input type="text" id="actllyFinishTime" />
	 			</td>
	 		</tr> 
	 		<tr id="trbeginPhoto">
	 			<td align="right" width="100px">照片：</td>
	 			<td width="150px">
	 				 <input type="file"  />
	 			</td>
	 		</tr>
	 		<tr id="trOverTimeReason">
	 			<td align="right" width="100px">超期原因 ：</td>
	 			<td width="150px">
	 				 <select name="overTimeReason" id="overTimeReason">
	 				 	<option>客户不在家</option>
	 				 	<option>其他原因</option>
	 				 </select>
	 			</td>
	 		</tr>
	 		<tr>
	 			<td align="right" width="100px">备注：</td>
	 			<td width="150px"> <input type="text"   size="40"/></td>
	 		</tr>
	 	</table>
	 </div>
</form>
<script th:inline="javascript">
        /*<![CDATA[*/
            $('#appointmentIn').datetimepicker({
                autoclose:true,
                todayHighlight:true,
                format: 'yyyy-mm-dd',
                pickDate: true,  
                pickTime: false,
                minView:2
            });
            $('#planFinishTime').datetimepicker({
                autoclose:true,
                todayHighlight:true,
                format: 'yyyy-mm-dd',
                pickDate: true,  
                pickTime: false,
                minView:2
            });
            
         
            
        /*]]>*/
    </script>
    
</html>